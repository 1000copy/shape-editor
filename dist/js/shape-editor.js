//! Built on 2015-06-10
//! GPL License. www.openmicroscopy.org

//!  DO NOT EDIT THIS FILE! - Edit under src/js/*.js

/* globals Raphael: false */
/* globals console: false */

var ShapeEditor = function ShapeEditor(elementId, width, height, options) {

	this.STATES = ["SELECT", "RECT", "LINE", "ARROW", "ELLIPSE"];
    // Set up Raphael paper...
    this.paper = Raphael(elementId, width, height);

    // Add a full-size background to cover existing shapes while
    // we're creating new shapes, to stop them being selected.
    // Mouse events on this will bubble up to svg and are handled below
    this.newShapeBg = this.paper.rect(0, 0, width, height);
    this.newShapeBg.attr({'fill':'#000',
                          'fill-opacity':0.01,
                          'cursor': 'crosshair'});
};


ShapeEditor.prototype.setState = function setState(state) {
	if (this.STATES.indexOf(state) === -1) {
        console.log("Invalid state: ", state, "Needs to be in", this.STATES);
        return;
    }
    // When creating shapes, cover existing shapes with newShapeBg
    var shapes = ["RECT", "LINE", "ARROW", "ELLIPSE"];
    if (shapes.indexOf(state) > -1) {
        this.newShapeBg.show().toFront();
    } else {
        this.newShapeBg.hide();
    }
    this.state = state;
};

ShapeEditor.prototype.getState = function getState() {
    return this.state;
};
